<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>Roskilde Festival: Gignal #rf12</title>
		<link rel="stylesheet" media="all" href="css/style.css"/>
		<style>
			iframe[seamless] {
				background-color: transparent;
				border: 0px none transparent;
				padding: 0px;
				/*overflow: hidden;*/
			}
			#gignalframe { 
				overflow: hidden;
				width: 444px;
			}
			#gignal: {
				overflow: scroll;
				width: 452px;
			}
			#news {
				float: left;
				width: 470px;
				height: 65px;
				overflow: hidden;
			}
			.videobox {
				width: 406px;
				height: 244px;
				margin-bottom: 10px;
			}
		</style>
	</head>
	<body>

		<div class="container_12">
			<div class="widget_content group">
				<div class="top_area alpha omega">
					<img class="float_left news_label" src="images/news_label.png" alt="news">
					<div id="news">
						<div class="grid_3 alpha">&nbsp;</div>
						<div class="grid_3">&nbsp;</div>
					</div>
					<div class="grid_3 omega alignCenter">
						<img src="images/hashtag.png" alt="#rf12">
					</div>
					<div class="grid_3 musicbox alignCenter alpha omega">
						<img src="images/music_box.png" alt="radio">
						<div class="musicbox_links">
							<a href="http://www.festivalradio.dk/lyt.pls" target="_blank">for Mac</a>
							<a href="http://www.festivalradio.dk/lyt.asx" target="_blank">for PC</a>
						</div>
					</div>
				</div>
				<div class="grid_6 alpha push_mid clear">
					<div class="videobox">
						<h3 class="videoTitle">Concerts 2012</h3>
						<div data-qbrick-ccid="34DC795A37AF38CA" data-qbrick-width="391" data-qbrick-height="220"></div>
					</div>
					<div class="videobox">
						<h3 class="videoTitle">festival stories</h3>
						<iframe src="http://www.youtube.com/embed/Z6xrBxsr-80?modestbranding=1" width="391" height="220" seamless></iframe>
					</div>
					<p><a href="http://www.youtube.com/user/roskildefestival" target="_blank" class="more_video">Watch more videos and concerts</a></p>
				</div>
				<div id="gignalframe" class="grid_5 omega alpha">
					<iframe id="gignal" src="widget/frame.html" width="461" height="537" seamless></iframe>
				</div>
			</div>
		</div>
		
		<script src="http://player.qbrick.com/playerembed.js" async="async"></script>
		<script src="widget/js/jquery-1.7.2.min.js"></script>
		<script>
			(function(){
				'use strict';
				String.prototype.trunc = function (n) {
					return this.substr(0, n - 1) + (this.length > n ? '&hellip;' : '');
				};
				function msxdr (url, na, callback) {
					var xdr = new XDomainRequest();
					xdr.open('get', url);
					//xdr.timeout = 10000;
					xdr.onload = function(){
						callback($.parseJSON(xdr.responseText));
					};
					xdr.onerror = function(e){
						console.log(e);
					};
					xdr.send();
				}
				
				var xdr = new XDomainRequest();
				xdr.open('get', 'http://pipes.yahoo.com/pipes/pipe.run?_id=gH84AH3M2xGUtbMFdbq02Q&_render=json&rssUrl=http%3A%2F%2Froskilde-festival.dk%2Frss.xml%3Ftx_tcnews_pi1%255brss%255d%3Duk%26tx_tcnews_pi1%255brsspid%255d%3D318%26no_cache%3D1');
				//xdr.timeout = 10000;
				xdr.onload = function(){
					console.dir($.parseJSON(xdr.responseText));
				};
				xdr.onerror = function(e){
					console.log(e);
				};
				xdr.send();
				
				
				var json_get = (jQuery.browser.msie && window.XDomainRequest) ? msxdr : jQuery.getJSON;
				//var rss_url = 'http://roskilde-festival.dk/rss.xml?tx_tcnews_pi1%5brss%5d=uk&tx_tcnews_pi1%5brsspid%5d=318&no_cache=1';
				var rss_json_url = 'http://pipes.yahoo.com/pipes/pipe.run?_id=gH84AH3M2xGUtbMFdbq02Q&_render=json&rssUrl=http%3A%2F%2Froskilde-festival.dk%2Frss.xml%3Ftx_tcnews_pi1%255brss%255d%3Duk%26tx_tcnews_pi1%255brsspid%255d%3D318%26no_cache%3D1';
				try {
					json_get(rss_json_url, null, function (data) {
						if (data.value && data.value.items && data.value.items.length) {
							for (var i = 0; i < 2; i++) {
								var a = jQuery('<a/>').attr('href', data.value.items[i].link).attr('target', '_blank').text(data.value.items[i].title);
								var p = jQuery('<p/>').html(data.value.items[i].description.trunc(40));
								jQuery('#news div:eq(' + i + ')').html(a).append(p);
							}
						}
					});
				} catch(e){
					console.dir(e);
				}
			})();
		</script>

	</body>
</html>
